(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[0],{52:function(e,t,a){},53:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(17),i=a.n(s),o=(a(52),a(15)),r=a(89),l=a(91),u=a(90),p=a(88),d=(a(53),a(22)),j=(a.p,a(92)),m=(a(57),d.a.initializeApp({apiKey:"AIzaSyDoZfd5dJoTZXgzurxdfpM17OrFzDeKEDU",authDomain:"insta-clone-with-react-by-27.firebaseapp.com",databaseURL:"https://insta-clone-with-react-by-27-default-rtdb.firebaseio.com",projectId:"insta-clone-with-react-by-27",storageBucket:"insta-clone-with-react-by-27.appspot.com",messagingSenderId:"356052773996",appId:"1:356052773996:web:430ad78752cae647347c49",measurementId:"G-WFQGLGBPG1"}).firestore()),b=d.a.auth(),h=d.a.storage(),g=a(5);var f=function(e){var t=e.postID,a=e.user,c=e.username,s=e.caption,i=e.imgUrl,r=Object(n.useState)([]),l=Object(o.a)(r,2),u=l[0],p=l[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),f=h[0],O=h[1];return Object(n.useEffect)((function(){var e;return t&&(e=m.collection("posts").doc(t).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){p(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]),Object(g.jsxs)("div",{className:"post",children:[Object(g.jsxs)("div",{className:"post_header",children:[Object(g.jsx)(j.a,{className:"post_avatar",alt:"MubashirIbrahim",src:null}),Object(g.jsx)("h2",{children:c})]}),Object(g.jsx)("img",{className:"post_img",src:i}),Object(g.jsxs)("h4",{className:"post_text",children:[Object(g.jsx)("strong",{children:c})," ",s]}),Object(g.jsx)("div",{className:"post__comments",children:u.map((function(e){return Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:e.username})," ",e.text]})}))}),a&&Object(g.jsxs)("form",{className:"post__commentBox",children:[Object(g.jsx)("input",{className:"post__input",type:"text",placeholder:"Add Comments...",value:f,onChange:function(e){return O(e.target.value)}}),Object(g.jsx)("button",{className:"post__Btn",disabled:!f,type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(t).collection("comments").add({text:f,username:a.displayName,timestamp:d.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Post"})]})]})};a(63);var O=function(e){var t=e.username,a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],i=c[1],r=Object(n.useState)(null),l=Object(o.a)(r,2),p=l[0],j=l[1],b=Object(n.useState)(0),f=Object(o.a)(b,2),O=f[0],x=f[1];return Object(g.jsxs)("div",{className:"imageUpload",children:[Object(g.jsx)("progress",{className:"image",value:O,max:"100"}),Object(g.jsx)("input",{type:"text",placeholder:"Enter Caption....",value:s,onChange:function(e){return i(e.target.value)}}),Object(g.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&j(e.target.files[0])}}),Object(g.jsx)(u.a,{onClick:function(){h.ref("images/".concat(p.name)).put(p).on("state_changed",(function(e){var t=100*Math.round(e.bytesTransferred/e.totalBytes);x(t)}),(function(e){console.log(e),alert(e.message)}),(function(){h.ref("images").child(p.name).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:d.a.firestore.FieldValue.serverTimestamp(),username:t,caption:s,imgUrl:e}),x(0),i(""),j(null)}))}))},children:"Upload"})]})},x=a(44);function v(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var _=Object(p.a)((function(e){return{paper:{position:"absolute",width:250,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var w=function(){var e=_(),t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),p=Object(o.a)(i,2),d=p[0],j=p[1],h=Object(n.useState)(v),w=Object(o.a)(h,1)[0],y=Object(n.useState)(""),N=Object(o.a)(y,2),S=N[0],C=N[1],k=Object(n.useState)(""),U=Object(o.a)(k,2),I=U[0],D=U[1],F=Object(n.useState)(""),E=Object(o.a)(F,2),B=E[0],P=E[1],A=Object(n.useState)(null),L=Object(o.a)(A,2),T=L[0],z=L[1],G=Object(n.useState)(!1),M=Object(o.a)(G,2),R=M[0],V=M[1];Object(n.useEffect)((function(){var e=b.onAuthStateChanged((function(e){e?(console.log(e),z(e)):z(null)}));return function(){e()}}),[T,S]),Object(n.useEffect)((function(){m.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]);var W=function(){window.location.reload()};return Object(g.jsxs)("div",{className:"app",children:[Object(g.jsx)(r.a,{open:d,onClose:function(){return j(!1)},children:Object(g.jsx)("div",{style:w,className:e.paper,children:Object(g.jsxs)("form",{className:"app__signUp",children:[Object(g.jsx)("center",{children:Object(g.jsx)("img",{className:"app__headerimg",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(g.jsx)(l.a,{type:"text",placeholder:"Username",value:S,onChange:function(e){return C(e.target.value)}}),Object(g.jsx)(l.a,{type:"email",placeholder:"Email",value:I,onChange:function(e){return D(e.target.value)}}),Object(g.jsx)(l.a,{type:"password",placeholder:"Password",value:B,onChange:function(e){return P(e.target.value)}}),Object(g.jsx)("br",{}),Object(g.jsx)(u.a,{type:"submit",onClick:function(e){e.preventDefault(),b.createUserWithEmailAndPassword(I,B).then((function(e){return e.user.updateProfile({displayName:S}),W()})).catch((function(e){return alert(e)})),j(!1)},children:"Sign Up"})]})})}),Object(g.jsx)(r.a,{open:R,onClose:function(){return V(!1)},children:Object(g.jsx)("div",{style:w,className:e.paper,children:Object(g.jsxs)("form",{className:"app__signUp",children:[Object(g.jsx)("center",{children:Object(g.jsx)("img",{className:"app__headerimg",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(g.jsx)(l.a,{type:"email",placeholder:"Email",value:I,onChange:function(e){return D(e.target.value)}}),Object(g.jsx)(l.a,{type:"password",placeholder:"Password",value:B,onChange:function(e){return P(e.target.value)}}),Object(g.jsx)("br",{}),Object(g.jsx)(u.a,{type:"submit",onClick:function(e){e.preventDefault(),b.signInWithEmailAndPassword(I,B).catch((function(e){return alert(e)})),V(!1)},children:"Sign IN"})]})})}),Object(g.jsxs)("div",{className:"app__header",children:[Object(g.jsx)("img",{className:"app__headerimg",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),T?Object(g.jsx)(u.a,{onClick:function(){return b.signOut()},children:"Sign out"}):Object(g.jsxs)("div",{className:"app__loginContainer",children:[Object(g.jsx)(u.a,{onClick:function(){return V(!0)},children:"Sign in"}),Object(g.jsx)(u.a,{onClick:function(){return j(!0)},children:"Sign up"})]})]}),Object(g.jsxs)("div",{className:"app_posts",children:[Object(g.jsx)("div",{className:"add_postLeft",children:c.map((function(e){var t=e.id,a=e.post;return Object(g.jsx)(f,{postID:t,user:T,username:a.username,caption:a.caption,imgUrl:a.imgUrl},t)}))}),Object(g.jsx)("div",{className:"add_postRight",children:Object(g.jsx)(x.a,{url:"https://www.instagram.com/p/CK5bcfgFYVV/?utm_source=ig_web_copy_link",clientAccessToken:"222767516249412|a581530117c3a2b913e8b01ab06ca330",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}})})]}),Object(g.jsx)("center",{children:(null===T||void 0===T?void 0:T.displayName)?Object(g.jsx)(O,{username:T.displayName}):Object(g.jsx)("h3",{className:"loginInfo",children:"Sorry Login First"})})]})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,94)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root")),y()}},[[66,1,2]]]);
//# sourceMappingURL=main.b6d4ac43.chunk.js.map